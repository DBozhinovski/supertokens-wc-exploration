import{d as a,e,f as s,g as t,t as i}from"./Shell-BkFPWQSo.js";import{s as o,S as n,t as r}from"./frontend-Dsao-SFv.js";var l=i("<div class=form-wrap part=st-email-password><input type=email placeholder=Email><slot name=custom-component></slot><input type=password placeholder=Password><button>Sign Up</button><button>Sign In");async function d(a){try{return await r.doesEmailExist({email:a})}catch(a){!0===a.isSuperTokensGeneralError?window.alert(a.message):window.alert("Oops! Something went wrong.")}}function w({navigate:a}){o(),void 0===a&&(a=a=>{window.location.href=a});const[i,w]=e(""),[c,m]=e(""),u=async()=>{const e=await d(i());e?.doesExist?window.alert("Email already exists. Please sign in instead"):async function(a,e,s){try{let t=await r.emailPasswordSignUp({formFields:[{id:"email",value:a},{id:"password",value:e}]});console.log(a,e),"FIELD_ERROR"===t.status?t.formFields.forEach((a=>{("email"===a.id||"password"===a.id)&&window.alert(a.error)})):"SIGN_UP_NOT_ALLOWED"===t.status?window.alert(t.reason):s("/dashboard/")}catch(a){console.log(a),!0===a.isSuperTokensGeneralError?window.alert(a.message):window.alert("Oops! Something went wrong.")}}(i(),c(),a)},p=async()=>{const e=await d(i());e?.doesExist?async function(a,e,s){try{let t=await r.emailPasswordSignIn({formFields:[{id:"email",value:a},{id:"password",value:e}]});"FIELD_ERROR"===t.status?t.formFields.forEach((a=>{"email"===a.id&&window.alert(a.error)})):"WRONG_CREDENTIALS_ERROR"===t.status?window.alert("Email password combination is incorrect."):"SIGN_IN_NOT_ALLOWED"===t.status?window.alert(t.reason):s("/dashboard/")}catch(a){!0===a.isSuperTokensGeneralError?window.alert(a.message):window.alert("Oops! Something went wrong.")}}(i(),c(),a):window.alert("Email does not exist. Please sign up instead")};return s((async()=>{await n.doesSessionExist()&&a?.("/dashboard/")})),g=l(),E=g.firstChild,S=E.nextSibling,f=S.nextSibling,h=f.nextSibling,y=h.nextSibling,E.$$input=a=>w(a.target.value),S._$owner=t(),f.$$input=a=>m(a.target.value),h.$$click=u,y.$$click=p,g;var g,E,S,f,h,y}a(["input","click"]);export{w as default};
