import{d as a,s as e,c as s,a as o,j as t,t as n,e as i,k as r,f as l,g as d,n as w,b as c,h as u}from"./Shell-D0Cge2mY.js";var m=n("<div class=form-wrap part=st-email-password><input type=email placeholder=Email><slot name=custom-component></slot><input type=password placeholder=Password><button>Sign Up</button><button>Sign In");async function g(a){try{return await r.doesEmailExist({email:a})}catch(a){!0===a.isSuperTokensGeneralError?window.alert(a.message):window.alert("Oops! Something went wrong.")}}function p({navigate:a}){e(),void 0===a&&(a=a=>{window.location.href=a});const[n,l]=s(""),[d,w]=s(""),c=async()=>{const e=await g(n());e?.doesExist?window.alert("Email already exists. Please sign in instead"):async function(a,e,s){try{let o=await r.emailPasswordSignUp({formFields:[{id:"email",value:a},{id:"password",value:e}]});console.log(a,e),"FIELD_ERROR"===o.status?o.formFields.forEach((a=>{("email"===a.id||"password"===a.id)&&window.alert(a.error)})):"SIGN_UP_NOT_ALLOWED"===o.status?window.alert(o.reason):s("/dashboard/")}catch(a){console.log(a),!0===a.isSuperTokensGeneralError?window.alert(a.message):window.alert("Oops! Something went wrong.")}}(n(),d(),a)},u=async()=>{const e=await g(n());e?.doesExist?async function(a,e,s){try{let o=await r.emailPasswordSignIn({formFields:[{id:"email",value:a},{id:"password",value:e}]});"FIELD_ERROR"===o.status?o.formFields.forEach((a=>{"email"===a.id&&window.alert(a.error)})):"WRONG_CREDENTIALS_ERROR"===o.status?window.alert("Email password combination is incorrect."):"SIGN_IN_NOT_ALLOWED"===o.status?window.alert(o.reason):s("/dashboard/")}catch(a){!0===a.isSuperTokensGeneralError?window.alert(a.message):window.alert("Oops! Something went wrong.")}}(n(),d(),a):window.alert("Email does not exist. Please sign up instead")};return o((async()=>{await i.doesSessionExist()&&a?.("/dashboard/")})),p=m(),S=p.firstChild,E=S.nextSibling,h=E.nextSibling,f=h.nextSibling,y=f.nextSibling,S.$$input=a=>l(a.target.value),E._$owner=t(),h.$$input=a=>w(a.target.value),f.$$click=c,y.$$click=u,p;var p,S,E,h,f,y}a(["input","click"]);const S=()=>{l("st-email-password",{},((a,{element:e})=>{const s=new CSSStyleSheet;s.replaceSync(d),e.navigate=a=>{window.location.href=a};const o=a=>{e.navigate(a)};return()=>(w(),e.shadowRoot.adoptedStyleSheets=[s],c(u,{get children(){return c(p,{navigate:o})}}))}))},E=a=>{console.log("stub for router"),console.log(a)};window.ST=window.ST||{},window.ST={...window.ST,EmailPassword:{load:S,generateRoutes:E}};export{E as generateRoutes,S as load};
